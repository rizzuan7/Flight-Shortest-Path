<html>
<head>
<style>
/* Always set the map height explicitly to define the size of the div
 * element that contains the map. */
#map {
  height: 80%;
  width:80%
}
/* Optional: Makes the sample page fill the window. */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
</style>
<body>
<center>
<div id="map"></div>
<a href="my_map.html">Maps</a>
<a href="polyline-after.html">After</a>
<!-- Replace the value of the key parameter with your own API key. -->


<script>
// This example creates a 2-pixel-wide red polyline showing the path of
// the first trans-Pacific flight between Oakland, CA, and Brisbane,
// Australia which was made by Charles Kingsford Smith.


//read text file generated by python for shortest path
readTextFile('file.txt');
var inputs;

//read text file generated by python for destination choosen by user
function readTextFile(file)
{
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, false);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                var allText = rawFile.responseText;
                inputs=allText.split("->");
				document.getElementById("frominput").innerHTML=allText;
				
            }
        }
    }
    rawFile.send(null);
}




function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 1.5,
    center: {lat: 2.7456, lng: 101.7072},
    mapTypeId: 'terrain'
  });


  var flightPlanCoordinates = [
    {lat:2.7456 ,		lng:101.7072},//kl

  ];
  
 var labels=[];
  var y=0;
  //
  for(var i=0 ;i<inputs.length ;i++){

		if(inputs[i]=="KL"){
		flightPlanCoordinates.push({lat:2.74552, lng:101.70151});
		labels[y]="KL";
		y=y+1;
		}
		if(inputs[i]=="HN"){
		flightPlanCoordinates.push({lat:21.0294498,lng:105.8544441});
		labels[y]="Hanoi";
		y=y+1;
		}
		if(inputs[i]=="TP"){
		flightPlanCoordinates.push({lat:25.0375198,lng:121.563680});
		labels[y]="Taipei";
		y=y+1;
		}
		if(inputs[i]=="SL"){
		flightPlanCoordinates.push({lat:37.566679,lng:126.978291});
		labels[y]="Seoul";
		y=y+1;
		}
		if(inputs[i]=="TK"){

		flightPlanCoordinates.push({lat:35.6828387,lng:139.7594549});
		labels[y]="Tokyo";
		y=y+1;
		}
		if(inputs[i]=="HK"){
		flightPlanCoordinates.push({lat:22.350627,lng:114.1849161});
		labels[y]="HongKong";
		y=y+1;
		}
		if(inputs[i]=="IN"){
		flightPlanCoordinates.push({lat:13.753893,lng:100.816080});
		labels[y]="Indonesia";
		y=y+1;
		}
		if(inputs[i]=="TH"){		
		flightPlanCoordinates.push({lat:-6.175394,lng:106.827183});
		labels[y]="Thailand";
		y=y+1;
		}
		if(inputs[i]=="VN"){		
		flightPlanCoordinates.push({lat:49.260872,lng:-123.113953});
		labels[y]="Vacouver";
		y=y+1;
		}
}
  
  
  
  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    geodesic: true,
    strokeColor: '#FF0000',
    strokeOpacity: 1.0,
    strokeWeight: 2
  });
  flightPath.setMap(map);
  // Place the marker
  for(var i=0 ;i<flightPlanCoordinates.length ;i++ ){
            new google.maps.Marker({
              map: map,
              position: flightPlanCoordinates[i],
			  label: labels[i-1]
            });
			}
			
}

</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap">
</script>
